# 手机品牌舆情 Copilot 部署清单

## 一、环境要求

### Python 环境
- Python 3.8+
- 推荐使用虚拟环境

### 依赖包
安装依赖：
```bash
pip install -r requirements.txt
```

主要依赖：
- fastapi
- uvicorn
- pandas
- requests
- pydantic

## 二、数据文件要求

### 必需的 CSV 数据文件

1. **Bilibili 数据**（在 `Global_Phone_Sentiment/` 目录下）：
   - `data_bilibili_v2.csv`
   - `data_bilibili.csv`

2. **GSMArena 数据**（在 `Global_Phone_Sentiment/` 目录下）：
   - `data_gsmarena_notebookcheck.csv`

3. **Reddit 数据**（在项目根目录下）：
   - `data_reddit_2111.csv`
   - `data_reddit_20251206_103022.csv`
   - `data_reddit_comments_20251206_105256.csv`

**注意**：系统会忽略所有 `data_smzdm*.csv` 文件。

## 三、启动服务

### 1. 启动后端服务
```bash
python main.py
```
或者使用 uvicorn：
```bash
uvicorn main:app --host 127.0.0.1 --port 8000 --reload
```

### 2. 访问前端
- 前端地址：`http://127.0.0.1:8000/`
- API 文档：`http://127.0.0.1:8000/docs`

## 四、功能特性

### 已完成功能
1. ✅ 数据加载与清洗（Bilibili/GSMArena/Reddit）
2. ✅ 品牌舆情概览（支持表头排序）
3. ✅ 评论透视（支持品牌/平台/型号/年月筛选）
4. ✅ 情感分析（基于关键词匹配）
5. ✅ Copilot 占位接口（规则基础实现）
6. ✅ 响应式布局（支持移动端）

### API 接口
- `GET /health` - 健康检查
- `GET /stats` - 统计数据
- `GET /insights` - 品牌洞察
- `GET /opinions` - 评论详情（支持筛选）
- `POST /copilot` - 智能分析（占位实现）

## 五、配置说明

### 品牌和型号配置
编辑 `Global_Phone_Sentiment/config.py` 可以：
- 修改品牌定义
- 调整目标抓取型号列表

## 六、注意事项

1. 首次启动时会加载所有 CSV 数据，可能需要几秒钟
2. GSM 平台数据均为评论类型，原始内容数为 0 是正常的
3. 情感分析基于关键词匹配，准确度有限
4. Copilot 接口当前为占位实现，不调用大模型

## 七、故障排查

### 前端无法访问
- 检查后端服务是否启动
- 确认端口 8000 未被占用
- 检查浏览器控制台错误

### 数据不显示
- 检查 CSV 文件是否存在
- 查看后端日志输出
- 确认文件路径正确

### 筛选不生效
- 清除浏览器缓存
- 检查 API 请求是否成功
- 查看网络请求参数

